<head>
<style>
.falselist{
    margin-bottom:4px;
    padding-left:15px
}
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<script>
$(document).ready(function(){
    var struc = "ex_model.pdb";//THIS WILL BE A VARIABLE
    var url_orig = "http://localhost:8081/html/embed/embed.html?struc="+struc;
    var rep = "r";
    function encode (sel) {return encodeURIComponent(sel).replace(/%20/g,'+');}
    var sel = "";
    var sel_enc = encode(sel);
    $("#to_mdsrv").click(function(){
         $(this).attr("href", "http://localhost:8081/html/mdsrv_emb.html?struc=" + struc + "&rep=" + rep + "&sel=" + sel_enc);//
    });
    $("iframe").attr("src", url_orig + "&rep=" +rep + "&sel=" + sel_enc);
    $("input").val("");
//    var rep_orig = "#iframe_" + rep;
//    $(rep_orig).addClass("active");
    $("#iframe_r").addClass("active");

    $("input").change(function(){
        sel = $(this).val();
        sel_enc = encode(sel);
        url = url_orig + ("&rep=" + rep +"&sel=" + sel_enc);
        $("iframe").attr("src", url);
    });

    function inactivateOthers(id1,id2) {
        var id1_class = $(id1).attr("class");
        var id2_class = $(id2).attr("class");
        if (id1_class.indexOf("active") != -1)
           {
            $(id1).removeClass("active");
           }
        if (id2_class.indexOf("active") != -1)
           {
            $(id2).removeClass("active");
           }
    }

    $("#iframe_r").click(function(){
        rep="r";
        url = url_orig + ("&rep=" +rep +"&sel=" + sel_enc);
        $("iframe").attr("src", url);
        $("#iframe_r").addClass("active");
        inactivateOthers("#iframe_rl","#iframe_all");
    });

    $("#iframe_rl").click(function(){
        rep="rl";
        url = url_orig + ("&rep=" +rep +"&sel=" + sel_enc);
        $("iframe").attr("src", url);
        $("#iframe_rl").addClass("active");
        inactivateOthers("#iframe_r","#iframe_all");
    });

    $("#iframe_all").click(function(){
        rep="all";
        url = url_orig + ("&rep=" +rep +"&sel=" + sel_enc);
        $("iframe").attr("src", url);
        $("#iframe_all").addClass("active");
        inactivateOthers("#iframe_r","#iframe_rl");
    });

});

</script>


</head>
{% extends "home/base.html" %} 
{% load staticfiles %} 


{% block content %} 
{% csrf_token %}

 <!-- description column -->
 <div class="col-md-4">

     <div class="col-md-12 panel panel-primary" style="background-color:blue;text-align:center;color:white;">   
         <div class="panel-body">
        	<h3 >Title?</h3>
         </div> 
     </div>

     <!-- main description -->
     <div class="col-md-12 panel panel-primary">
         <div class="panel-body">

            <div style="text-align:center"> 
             <h4 >GPCR VIEWER</h4>
	    </div>
             <p style="text-align: justify;">Please select what you want to display in your molecular representation.</p>

	     <p style="text-align: justify;">You can choose one of the selections we propose or define a new one using the <a href="http://proteinformatics.charite.de/ngl/doc/index.html#User_manual/Usage/Selection_language" target="_blank">NGL selection language</a> to limit which atoms/residues are shown.<p>
             <p style="text-align: justify;margin-bottom:4px">Mouse controls:</p>
		<span><p class="falselist">Left button hold and move: rotate camera around center.</p>
		<p class="falselist">Middle button hold and move: zoom camera in and out.</p>
		<p class="falselist">Middle button click: center camera on atom.</p>
		<p style="padding-left:15px" >Right button hold and move: translate camera in screen plane.</p></span>
             <p style="text-align: justify;">For more information about the viewer, visit the <a href="http://proteinformatics.charite.de/ngl/doc/index.html" target="_blank">NGL documentation</a>.</p>
             <p style="text-align: justify;">If you wish a more complete visualization or to add a trajectory, you can open your structure in <a href="http://arose.github.io/mdsrv/" target="_blank" >MDsrv</a>.</p>

         </div>
     </div>

     <!-- link to docs -->
     <div class="col-md-12 panel panel-primary">
         <div class="panel-body">
             <p>For more information on this form, see the <a href="http://docs.gpcrdb.org/receptors.html">docs</a>.
             </p>
         </div>
     </div>
  </div>
 <!--   <body> -->

<div id="pprotform"class="col-md-7 "> 
  <div id="protform" class="col-md-12 panel panel-primary"> 
    <div class="panel-body">

<!-- 			<div style="text-align:center">
             			<h4><br>GPCR visualizaion</h4>
            		</div><br>   -->



        <div class="container-fluid" style="padding-top:15px">
            <div class="row">
               <div class="col-sm-4" style="padding-bottom:10px;padding-right:3px;padding-left:3px" > 
                  <button  class="btn btn-block btn-default" id="iframe_r" >Receptor</button>
               </div>
               <div class="col-sm-4" style="padding-bottom:10px;padding-right:3px;padding-left:3px">  
                  <button  class="btn btn-block btn-default" id="iframe_rl">Ligand and receptor</button>
               </div>
               <div class="col-sm-4" style="padding-bottom:10px;padding-right:3px;padding-left:3px">  
                  <button  class="btn btn-block btn-default" id="iframe_all">All</button>
               </div>
          </div>


            <div class="row">
               <div  style="padding-bottom:10px;padding-right:3px;padding-left:3px" > 
	             <input class="form-control" type="text" id="sel" placeholder="Specify your selection" style="width:100%;background-color:#F8F8F8">
                </div>
            </div>

         <div>
          <iframe src="http://localhost:8081/html/embed/embed.html" style="width:100%;height:370px;border:none;overflow:hidden" scrolling="no"></iframe> <!-- CHANGE THIS URL SO THAT struc IS A VARIABLE!! --> 
         </div>

        <div style="padding-top:10px;padding-right:3px;padding-left:3px">
           <a class="btn btn-default"  id="to_mdsrv" role="button" style="padding:5px" href="http://localhost:8081/html/mdsrv_emb.html">Open in MDsrv</a>

        </div>

       </div>


{% endblock content %} 
         

{% block addon_js %} 


{% endblock %}



