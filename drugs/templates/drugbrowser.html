{% extends "home/base.html" %}
{% load staticfiles %}
{% block addon_css %}
<link rel="stylesheet" href="{% static 'home/css/jquery.dataTables.min.css' %}" type="text/css" />
{% endblock %}
{% block content %}
<h2>Drug Browser</h2>
<div class="row">
    <div class="col-md-11 text-center">
        {% if drugdata %}              
        <div style="padding-top: 0px; font-size: 12px; white-space: nowrap;">
            <table width="100%" class="display" id="drugdata">

                <thead>
                    <tr>
                        <th style="text-align:center">Drug Name</th>
                        <th style="text-align:center">Indication</th>
                        <th style="text-align:center">Target</th>
                        <th style="text-align:center">Status</th>
                        <th style="text-align:center">Year of Approval</th>
                        <th style="text-align:center">Drug Type</th>
                        <th style="text-align:center">Novelty</th>
                    </tr>
                </thead>
                <tfoot>
                    <tr>
                        <th style="text-align:center"></th>
                        <th style="text-align:center"></th>
                        <th style="text-align:center"></th>
                        <th style="text-align:center"></th>
                        <th style="text-align:center"></th>
                        <th style="text-align:center"></th>
                        <th style="text-align:center"></th>
                    </tr>
                    <tr>
                        <th style="text-align:center">Drug Name</th>
                        <th style="text-align:center">Indication</th>
                        <th style="text-align:center">Target</th>
                        <th style="text-align:center">Status</th>
                        <th style="text-align:center">Year of Approval</th>
                        <th style="text-align:center">Drug Type</th>
                        <th style="text-align:center">Novelty</th>
                    </tr>
                </tfoot>
                {% for row in drugdata %}
                <tr>
                <td style="text-align:center">{{row.name|safe}}</td>
                <td style="text-align:center">{{row.indication|safe}}</td>
                <td style="text-align:center">{{row.target|safe}}</td>
                <td style="text-align:center">{{row.status|safe}}</td>
                <td style="text-align:center">{{row.approval|safe}}</td>
                <td style="text-align:center">{{row.drugtype|safe}}</td>
                <td style="text-align:center">{{row.novelty|safe}}</td>
                {% endfor %}
            </table>
        </div>
    {% else %}
        <p> Ooops! There is no data to show here yet. </p>
    {% endif %}

    </div>
</div>
<br>

{% endblock %}
{% block addon_js %}
<script src="{% static 'home/js/jquery.dataTables.min.js' %}"> </script>
<script src="{% static 'home/js/dataTables.tableTools.min.js' %}"> </script>
<script src="{% static 'home/js/jquery.dataTables.columnFilter.js' %}"> </script>
   
<script type="text/javascript" charset="utf-8">
        $(document).ready(function() {
            var table = $('#drugdata').DataTable({
                "scrollX": true,
                "scrollY": 600,
                "bScrollCollapse": true,
                'paging': false,
                orderCellsTop: true,
                "autoWidth": true,
                "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {

                    if ({{ drugdata|safe }}.indexOf(aData[2] ) >=0  )
                    {
                        $('td', nRow).css('background-color', '#ffffff');
                    }
                    else
                    {
                        $('td', nRow).css('background-color', '#ffffff');
                    }
                },
                dom: 'T<"clear">lfrtip',
                "aoColumnDefs": [
                    { "sType": "string", "aTargets": [0] },
                ],
                tableTools: {
                    "sRowSelect": "multi",
                    "aButtons": []
                },
                initComplete: function () {
                    $('#residues').dataTable().columnFilter({
                        sPlaceHolder: "foot:after",
                        aoColumns: [
                            { type: "select" },
                            { type: "select" },
                            { type: "select" },
                        ]
                    });
                }

            });
        });
    </script> 
{% endblock %}