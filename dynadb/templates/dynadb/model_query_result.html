
{% extends "home/base.html" %} 
{% load static %}
{% load staticfiles %} 
{% block addon_css %}
    <style>
    .panel-body {
        word-break:break-all
    }    

    .carousel .item img{
        margin: 0 auto; /* Align slide image horizontally center */
    }

    .bs-example{
	    margin: 20px;
    }
  </style>
{% endblock %}
{% block content %}
    <div class="container">
    <div class="panel panel-info">
    <div class="panel-heading"><b>Complex Structure Info:</b> {{answer.description}} </div>
    <div class="panel-body">
    {% if answer.pdbid%} 
      <b>PDB ID</b>:{{answer.pdbid}} <br>
    {% endif %}

    {% if answer.type%} 
      <b>Complex Structure type</b>:<br> {{answer.type}} <br>
    {% endif %}
    <br>
    {%if answer.link2protein%}
        <b>Protein(s) involved</b>:<br>
            {%for link in answer.link2protein%}
                <a target='_blank' class='btn btn-info' role='button' href=/dynadb/protein/id/{{link.0}}>{{link.1}}<br></a>
            {%endfor%}
    {%endif%}
    <br><br>


    {% if answer.ortoligands %}
        <b>Orthosteric ligand(s)</b>:<br>
        {% for url in answer.ortoligands %}
            <a href= /dynadb/molecule/id/{{url.0}}> <img src="{{url.1}}" height="200" width="200"/> </a>
        {% endfor %}
    {% endif %}
    <br>
    {% if answer.aloligands %}
        <b>Allosteric ligand(s)</b>:<br>
        {% for url in answer.aloligands %}
            <a href= /dynadb/molecule/id/{{url.0}}> <img src="{{url.1}}" height="200" width="200"/> </a>
        {% endfor %}
    {% endif %}

    {% if answer.components%} 
        <b>Molecules used in this complex structure</b>:   <button id='showall' type="button" class="btn btn-primary">Show all</button> <br><br>
        <div id='carouselhide'>
        <div class="col-lg-12 text-center"></div>
        <div class="col-lg-12">
        <div id="myCarousel" class="carousel slide" data-ride="carousel">

          <!-- Wrapper for slides -->
          <div class="carousel-inner" role="listbox">
        {% for url in answer.components %}
            {% if forloop.counter == 1  %}
            <div class="item active"><a href= /dynadb/molecule/id/{{url.0}}> <img src="{{url.1}}" height="400" width="400"/> </a></div>
            {%else%}
            <div class="item"><a href= /dynadb/molecule/id/{{url.0}}> <img src="{{url.1}}" height="400" width="400"/> </a></div>
            {%endif%}

        {% endfor %}
          </div></div>

          <!-- Left and right controls -->
          <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
          <br>    
        </div></div>
        
        <div id='hideall'>
        {% for url in answer.components %}
            <a href= /dynadb/molecule/id/{{url.0}}> <img src="{{url.1}}" height="200" width="200"/> </a>
        {% endfor %}
        </div>
    {% endif %} 
    <br><br>
        <b>Dynamic(s) in which this complex structure appears</b>:<br>

    {%for compoundlink in answer.dynamics%}
       <a target='_blank' class='btn btn-info' role='button' href= /dynadb/dynamics/id/{{compoundlink}}> Dynamics ID: {{compoundlink}}</a>
    {%endfor%}
    <br>


    {% if answer.references %} 
        <br><b>References in which this complex structure is mentioned</b>:<br>
        <ul>
        {%for reference in answer.references%}
              <li> {{reference.1}} <br> {{reference.2}} <br>  {{reference.0}}  {{reference.3}} </li>
        {%endfor%}
        </ul>
    {% endif %} 


    </div>
    </div>

{%endblock content %}
{% block addon_js %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="{% static 'dynadb/molecular_carousel.js' %}"></script>
{% endblock%}
